# Test Plan for Hostfully Test APIs

### Overview

This test plan covers the functional testing of the Hostfully API endpoints for creating properties and bookings. The API is used to create properties and then create bookings using the generated property IDs. Note that some tests are designed to fail on purpose (negative tests) to ensure proper error handling and validation. Additionally, fields such as id and created_at are generated by the API (as shown in Swagger) and are not part of the request payload; they are validated only in the response.

### Scope

##### Application to be tested
- Booking and Properties api, version 1.0.0

##### Features to be tested
- property creation and retrival by id
- bookings creation

##### Test Environment
- Api 

##### Test Scheduled
- Test Planning
- Test Case Creation
- Execution
- Automation tests
- Reports
- Deploy and Follow-up

##### Risk
- Might not be able to meet the deadline
- Extra environment to test performance
  
##### Properties Endpoint:
- POST /properties
  
##### Get Property Endpoint:
- GET /properties/{id}
  
##### Bookings Endpoint:
- POST /bookings



### Test Scenarios

#### A. Properties Endpoint (/post properties)
Total Scenarios: **7**

**Create Property with Success Check**

**Objective:** Verify that a property is created successfully when valid data is provided.
**Expected Outcome:** Response status code 201, valid property object returned (with generated id and created_at).

**Create a Property with Different Country Code Check**

**Objective:** Validate that a property can be created when a valid but different country code (e.g., "US", "BR") is provided.
**Expected Outcome:** Response status code 201; property object contains the specified country code.

**Attempt to Create a Property with Alias Already Existed**

**Objective:** Ensure the API handles conflicts when attempting to create a property with a duplicate alias.
**Expected Outcome:** Response status code 409 (Conflict) with an appropriate error message.

**Attempt to Create a Property with Invalid Country Code**

**Objective:** Check that the API validates the country code field and rejects invalid values (e.g., "SW" when only "US" and "BR" are allowed).
**Expected Outcome:** Response status code 400 (Bad Request) with a detailed error message.

**Attempt to Create a Property without Alias**

**Objective:** Verify that the API returns an error when required fields (alias) are missing.
**Expected Outcome:** Response status code 400 with a validation error message indicating that the property alias is required.

**Attempt to Create a Property with Invalid Credentials**

**Objective:** Ensure the API returns an authentication error when invalid credentials are used.
**Expected Outcome:** Response status code 401 (Unauthorized) with an appropriate error message.

**Attempt to Create a Property with Invalid URL**

**Objective:** Confirm that accessing an invalid endpoint (e.g., "/propertiesss") returns the correct error.
**Expected Outcome:** Response status code 404 (Not Found).



**Note:** The scenario “attempt to create a property without countryCode” is not covered because the DTO does not include address-related fields. However, it is noted that the API might later require an address.

#### B. Get Property Endpoint (/get property/{id})
Total Scenarios: **4**

**Get Property by ID with Success**

**Objective:** Verify that a property can be retrieved successfully by its ID.
**Expected Outcome:** Response status code 200 and a property object with a valid id and created_at.

**Attempt to Get a Property with an Invalid ID**

**Objective:** Validate that the API returns an error when a non-existent property ID is provided.
**Expected Outcome:** Response status code 404 with an appropriate error message.

**Attempt to Get a Property with a Wrong String ID**

**Objective:** Confirm that the API returns an error when the ID format is invalid (e.g., non-UUID string).
**Expected Outcome:** Response status code 400 or 404 depending on API design.

**Attempt to Get a Property with Wrong Credentials**
**Objective:** Ensure that the API returns an error when invalid credentials are used to retrieve a property.
**Expected Outcome:** Response status code 401 (Unauthorized).

#### C. Bookings Endpoint (/post bookings)
Total Scenarios: **16**

**Create a Booking with Success (SCHEDULED Status)**

**Objective:** Verify that a booking is created successfully with a default SCHEDULED status.
**Expected Outcome:** Response status code 201 and valid booking object with generated id and created_at.

**Create a Booking with Success (COMPLETED Status)**

**Objective:** Check that a booking can be created with a COMPLETED status.
**Expected Outcome:** Response status code 201 and booking object containing status COMPLETED.

**Create a Booking with Success (CANCELLED Status)**

**Objective:** Check that a booking can be created with a CANCELLED status.
**Expected Outcome:** Response status code 201 and booking object containing status CANCELLED.

**Create a Booking with startDate Equal to endDate** 

**Objective:** Validate behavior when the booking start date is the same as the end date.
**Expected Outcome:** Response status code 400 or 422 (depending on API design) with an appropriate error message.

**Attempt to Create a Booking with Invalid Status**

**Objective:** Ensure that the API returns an error when an invalid booking status is provided.
**Expected Outcome:** Response status code 400 with a validation error message.

**Attempt to Create a Booking with an Invalid Property**

**Objective:** Confirm that the API returns an error when trying to create a booking for a non-existent property.
**Expected Outcome:** Response status code 404 with an error message indicating property not found.

**Attempt to Create a Booking with Invalid Credentials**

**Objective:** Verify that using invalid credentials for booking creation returns an authentication error.
**Expected Outcome:** Response status code 401 (Unauthorized).

**Attempt to Create a Booking with endDate After startDate**

**Objective:** (This is likely a typo; it should be "before startDate".)
**Objective:** Ensure that a booking cannot be created if the end date is before the start date.
**Expected Outcome:** Response status code 400 with an error message such as "End date cannot be before the start date. Please check your booking dates."

**Attempt to Create a Booking Without Guest First Name**

**Objective:** Verify that creating a booking without a guest's first name returns a validation error.
**Expected Outcome:** Response status code 400 with an error message indicating that guest first name is required.

**Attempt to Create a Booking Without Guest Last Name***

**Objective:** Verify that creating a booking without a guest's last name returns a validation error.
**Expected Outcome:** Response status code 400 with an error message indicating that guest last name is required.

**Attempt to Create a Booking Without Guest Date of Birth**

**Objective:** Verify that creating a booking without the guest's date of birth returns a validation error.
**Expected Outcome:** Response status code 400 with an error message indicating that the guest's date of birth is required.

**Attempt to Create a Booking Without startDate**
**Objective:** Validate that a booking creation fails if the startDate is missing.
**Expected Outcome:** Response status code 400 with a validation error message.

**Attempt to Create a Booking Without endDate**

**Objective:** Validate that a booking creation fails if the endDate is missing.
**Expected Outcome:** Response status code 400 with a validation error message.

**Attempt to Create a Booking with a Date Too Far in the Future**

**Objective:** Ensure that the API rejects bookings with dates unrealistically far in the future.
**Expected Outcome:** Response status code 400 or 422 with an error message indicating that the date is invalid.

**Attempt to Create a Booking Overlapping with Another Booking's Dates**

**Objective:** Validate that the API does not allow overlapping bookings for the same property.
**Expected Outcome:** Response status code 409 (Conflict) with an error message such as "Booking dates overlap with an existing booking."

**Attempt to create a booking in the past**

**Objective:** Validate that the API does not allow create bookings in the past
**Expected Outcome:** Response status code 400 (Bad Request) with an error message such as "Invalid booking dates: dates in the past"

#### Additional Comments

##### Generated Fields:
The id and created_at fields are generated by the API. The tests will validate that these fields are present in the response, but they are not part of the request payload.

##### Status Field for Booking:

There is a discussion regarding whether bookings should be created directly with statuses like COMPLETED or CANCELLED. As a QA, it is advisable to question this with the product team. Typically, bookings should be created with a default status (e.g., SCHEDULED) and updated later as necessary.

##### Test Failures on Purpose:

Some tests are intentionally designed to fail (for example, when passing invalid credentials, duplicate aliases, or overlapping dates) to ensure that the API properly handles error scenarios.
